# Development Dockerfile with hot reload
FROM golang:1.21-alpine AS dev

WORKDIR /app

# Install development tools
RUN apk add --no-cache git make bash

# Install Air for live reloading
RUN go install github.com/cosmtrek/air@latest

# Install golangci-lint for linting
RUN wget -O- -nv https://raw.githubusercontent.com/golangci/golangci-lint/master/install.sh | sh -s latest

# Copy go mod files and source
COPY go.mod go.sum ./
COPY . .

# Tidy and download dependencies
RUN go mod tidy && go mod download

# Expose port
EXPOSE 8080

# Default command (can be overridden in docker-compose.dev.yml)
CMD ["go", "run", "main.go"]

